<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="padding:20px; font-family: sans-serif;">
    <h1>üß™ –¢–ï–°–¢ –û–¢–ü–†–ê–í–ö–ò</h1>

    <button onclick="testSend()"
            style="background:#4a6fa5; color:white; padding:20px 40px;
                   font-size:24px; border:none; border-radius:10px; cursor:pointer;">
        üì§ –ù–ê–ñ–ú–ò –ú–ï–ù–Ø
    </button>

    <div id="status" style="margin-top:20px; padding:20px; background:#f0f0f0; border-radius:10px;">
        –°—Ç–∞—Ç—É—Å: –æ–∂–∏–¥–∞–Ω–∏–µ
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function testSend() {
            const status = document.getElementById('status');
            status.innerHTML = 'üü° –û—Ç–ø—Ä–∞–≤–∫–∞...';
            status.style.background = '#fff3cd';

            try {
                // –ü–†–û–°–¢–ï–ô–®–ê–Ø –æ—Ç–ø—Ä–∞–≤–∫–∞
                const data = JSON.stringify({action: 'test'});
                console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é:', data);
                tg.sendData(data);

                status.innerHTML = '‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å —Ç–µ—Ä–º–∏–Ω–∞–ª –±–æ—Ç–∞';
                status.style.background = '#d4edda';
            } catch(e) {
                status.innerHTML = '‚ùå –û—à–∏–±–∫–∞: ' + e.message;
                status.style.background = '#f8d7da';
                console.error(e);
            }
        }

        // –°–ª—É—à–∞–µ–º –æ—Ç–≤–µ—Ç
        tg.onEvent('webAppData', function(e) {
            console.log('üì• –û—Ç–≤–µ—Ç:', e.data);
            document.getElementById('status').innerHTML = '‚úÖ –û—Ç–≤–µ—Ç: ' + e.data;
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        console.log('‚úÖ Telegram Web App:', !!tg);
        console.log('üì± –í–µ—Ä—Å–∏—è:', tg.version);
    </script>
</body>
</html>